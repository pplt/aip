%%%%%%%%%%%%%%%%%% Colors %%%%%%%%%%%%%%%%%%
\usepackage{xcolor}
\definecolor{nicered}{rgb}{0.6, 0, 0.1}
\definecolor{niceblue}{rgb}{0.06, 0.3, 0.57}
\definecolor{nicegreen}{rgb}{0.0, 0.51, 0.5}

%%%%%%%%%%%%%%%%%% Assorted Packages %%%%%%%%%%%%%%%%%%
\usepackage[colorlinks=true,pagebackref,hyperindex,citecolor=nicegreen,linkcolor=niceblue,urlcolor=nicered]{hyperref}
\usepackage{amsmath,amsthm,amsfonts,amssymb}
%\usepackage{color}
\usepackage{mathrsfs,stmaryrd,bm}
\usepackage[mathcal]{euscript}
\usepackage{mathtools,soul}
\usepackage{microtype}
\usepackage[shortlabels]{enumitem}
\usepackage{booktabs}
\usepackage{xspace}
\usepackage{caption,subcaption}
\captionsetup[subfigure]{subrefformat=simple,labelformat=simple}
\renewcommand\thesubfigure{(\sc \alph{subfigure})}
\usepackage[
ruled,
%linesnumbered,
vlined]{algorithm2e}

%shortfall and deficit
\newcommand{\short}{\operatorname{short}}
\newcommand{\ushort}{\operatorname{ushort}}
\newcommand{\deficit}{\operatorname{deficit}}
\newcommand{\udeficit}{\operatorname{udeficit}}

\newcommand{\denom}{d} 
\newcommand{\fsr}{\mathcal{R}}

\renewcommand{\S}{\mathcal{S}}
\newcommand{\pp}{\mathsf{p}}
\renewcommand{\tt}{\mathsf{t}}


\newcommand{\hooklongrightarrow}{\lhook\joinrel\longrightarrow}

\newcommand{\mspec}{\operatorname{mSpec}}
\newcommand{\spec}{\operatorname{Spec}}

%clever ref package
%must come before following 3 sections
\usepackage{cleveref}  %must be consistent with names in following 3 sections
\crefname{equation}{Eq.}{Eqs.}
\crefname{theorem}{Theorem}{Theorems}
\crefname{lemma}{Lemma}{Lemmas}
\crefname{corollary}{Corollary}{Corollaries}
\crefname{proposition}{Proposition}{Propositions}
\crefname{definition}{Definition}{Definitions}
\crefname{remark}{Remark}{Remarks}
\crefname{example}{Example}{Examples}
\crefname{notation}{Notation}{Notations}
\crefname{setup}{Setup}{Setups}
\crefname{question}{Question}{Questions}
\crefname{convention}{Convention}{Conventions}
\crefname{algorithm}{Algorithm}{Algorithms}
\newcommand{\creflastconjunction}{, and\nobreakspace}

 %theorem style environments
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{thmintro}{Theorem}
\renewcommand{\thethmintro}{\Alph{thmintro}}

%definition style environments
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{setup}[theorem]{Setup}
\newtheorem{example}[theorem]{Example}

%remark style environments
\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{notation}[theorem]{Notation}
\newtheorem{convention}[theorem]{Convention}
\newtheorem{problem}[theorem]{Problem}
\newtheorem*{claim}{Claim}

%numbering
\numberwithin{equation}{subsection} %Can replace {subsection} with {theorem} if you want

%spacing
%\usepackage{setspace}
%\singlespacing
%\onehalfspacing
%\doublespacing
%\setstretch{1.1}

%\setlength{\parskip}{0.4em}


%various thresholds
\DeclareMathOperator{\lct}{lct}
\DeclareMathOperator{\fpt}{fpt}
\newcommand{\ft}[2]{\operatorname{ft}(#1, #2)}

%ideals
\newcommand{\ideal}[1]{\langle #1 \rangle}
\newcommand{\ideala}{\mathfrak{a}}
\newcommand{\idealb}{\mathfrak{b}}
\newcommand{\ideald}{\mathfrak{d}}
\newcommand{\idealm}{\mathfrak{m}}
\newcommand{\idealp}{\mathfrak{p}}
\newcommand{\mon}{\operatorname{mon}}
\newcommand{\idealc}{\mathfrak{c}}
\newcommand{\J}{\mathcal{J}} % for multiplier ideals

%linear & integer programs
\newcommand{\LP}{\mathrm{P}}
\newcommand{\IP}{\Pi}
\newcommand{\ip}{\Theta}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\opt}{opt}
\DeclareMathOperator{\val}{val}
\DeclareMathOperator{\feas}{feas}

%convexity
\DeclareMathOperator{\conv}{conv}
\DeclareMathOperator{\cone}{cone}
\DeclareMathOperator{\rb}{rb}
\DeclareMathOperator{\rs}{rs}
\DeclareMathOperator{\ri}{ri}

%euclidean space
\newcommand{\vv}[1]{\mathbf{#1}} %vectors
\newcommand{\iprod}[2]{\langle #1, #2 \rangle} %dot product
\newcommand{\norm}[1]{ \| #1 \| } % norm
\newcommand{\canvec}{\vv{e}}
\newcommand{\defpt}{\vv{c}}
%representation of rational numbers
\newcommand{\tail}[1]{\left[ #1 \right]}
\newcommand{\lpr}[2]{ [ \hspace{.01in} #1 \, \% \, #2 \hspace{.01in} ]} %least positive residue
\newcommand{\up}[1]{\left\lceil #1 \right\rceil} %ceiling
\newcommand{\down}[1]{\left\lfloor #1 \right\rfloor} %floor

%random
\DeclareMathOperator{\col}{col}
\DeclareMathOperator{\mf}{mf}
\renewcommand{\sp}{\operatorname{sp}}
%\DeclareMathOperator{\rep}{rep}
%\DeclareMathOperator{\lis}{list}
\newcommand{\Q}{\mathcal{Q}}
%\newcommand{\N}{\mathrm{N}}
\newcommand{\N}{\mathcal{N}}
\newcommand{\M}{\mathcal{M}}
\renewcommand{\O}{\mathcal{O}}
\newcommand{\Z}{\mathcal{Z}}

% newly-defined commands
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\crit}{crit}
\newcommand{\orep}{\mathbb{O}}
\newcommand{\witt}{\mathfrak{W}}
\newcommand{\graph}{\mathfrak{S}}
\newcommand{\sierp}{\mathscr{S}}
\newcommand{\fip}{\Sigma}
\DeclareMathOperator{\sprout}{sprout}
\newcommand{\sproutsfrom}[2]{#1 \leftarrow #2}
%\newcommand{\sproutsfrom}[2]{#1 \in \operatorname{sp} #2}
\newcommand{\collapse}{\widebar}

%sets
\newcommand{\kk}{\Bbbk}
\newcommand{\LL}{\mathbb{L}}
\newcommand{\FF}{\mathbb{F}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\RRnn}{\mathbb{R}_{\ge 0}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\NN}{\mathbb{N}}
\renewcommand{\emptyset}{\varnothing}

\newcommand{\numvars}{m}

%inequalities
\renewcommand{\geq}{\geqslant}
\renewcommand{\leq}{\leqslant}
\renewcommand{\ge}{\geqslant}
\renewcommand{\le}{\leqslant}

%abbreviations
\newcommand{\cf}{\emph{cf}.\ }
\newcommand{\eg}{e.g., }
\newcommand{\ie}{i.e., }
\newcommand{\loccit}{\emph{loc.~cit.\ }}

\newcommand{\muCool}{$\mu$-uniform\xspace}
\newcommand{\nuCool}{$\nu$-uniform\xspace}
\newcommand{\mustata}{Musta{\c{t}}\u{a}\xspace}


%notes
\usepackage[textwidth=3.3 cm,textsize=small,shadow
%disable
%%option disable removes the notes
]{todonotes}
\newcommand{\comment}[2][]{\todo[linecolor=orange,backgroundcolor=orange!30!,caption={}, #1]{#2}} % color-name! intensity !
\newcommand{\alert}[2][]{\todo[linecolor=red,backgroundcolor=red!50!,caption={}, #1]{#2}} % color-name! intensity !
\newcommand{\details}[2][]{\todo[linecolor=cyan,backgroundcolor=cyan!40, caption={},#1]{#2}}

\newcommand{\emily}[2][]{\todo[linecolor=green,backgroundcolor=green!30!,caption={}, #1]{#2}}
\newcommand{\daniel}[2][]{\todo[linecolor=blue,backgroundcolor=blue!30!,caption={}, #1]{#2}}
\newcommand{\pedro}[2][]{\todo[linecolor=nicegreen,backgroundcolor=nicegreen!70!,caption={}, #1]{#2}}

%editing
\renewcommand{\!}[1]{{\color{red}\text{$\star$\,}#1\,$\star$}}
\newcommand{\ol}[1]{\overline{#1}}

% Decent looking bars (by Hendrik Vogt)
\makeatletter
\let\save@mathaccent\mathaccent
\newcommand*\if@single[3]{%
  \setbox0\hbox{${\mathaccent"0362{#1}}^H$}%
  \setbox2\hbox{${\mathaccent"0362{\kern0pt#1}}^H$}%
  \ifdim\ht0=\ht2 #3\else #2\fi
  }
%The bar will be moved to the right by a half of \macc@kerna, which is computed by amsmath:
\newcommand*\rel@kern[1]{\kern#1\dimexpr\macc@kerna}
%If there's a superscript following the bar, then no negative kern may follow the bar;
%an additional {} makes sure that the superscript is high enough in this case:
\newcommand*\widebar[1]{\@ifnextchar^{{\wide@bar{#1}{0}}}{\wide@bar{#1}{1}}}
%Use a separate algorithm for single symbols:
\newcommand*\wide@bar[2]{\if@single{#1}{\wide@bar@{#1}{#2}{1}}{\wide@bar@{#1}{#2}{2}}}
\newcommand*\wide@bar@[3]{%
  \begingroup
  \def\mathaccent##1##2{%
%Enable nesting of accents:
    \let\mathaccent\save@mathaccent
%If there's more than a single symbol, use the first character instead (see below):
    \if#32 \let\macc@nucleus\first@char \fi
%Determine the italic correction:
    \setbox\z@\hbox{$\macc@style{\macc@nucleus}_{}$}%
    \setbox\tw@\hbox{$\macc@style{\macc@nucleus}{}_{}$}%
    \dimen@\wd\tw@
    \advance\dimen@-\wd\z@
%Now \dimen@ is the italic correction of the symbol.
    \divide\dimen@ 3
    \@tempdima\wd\tw@
    \advance\@tempdima-\scriptspace
%Now \@tempdima is the width of the symbol.
    \divide\@tempdima 10
    \advance\dimen@-\@tempdima
%Now \dimen@ = (italic correction / 3) - (Breite / 10)
    \ifdim\dimen@>\z@ \dimen@0pt\fi
%The bar will be shortened in the case \dimen@<0 !
    \rel@kern{0.6}\kern-\dimen@
    \if#31
      \overline{\rel@kern{-0.6}\kern\dimen@\macc@nucleus\rel@kern{0.4}\kern\dimen@}%
      \advance\dimen@0.4\dimexpr\macc@kerna
%Place the combined final kern (-\dimen@) if it is >0 or if a superscript follows:
      \let\final@kern#2%
      \ifdim\dimen@<\z@ \let\final@kern1\fi
      \if\final@kern1 \kern-\dimen@\fi
    \else
      \overline{\rel@kern{-0.6}\kern\dimen@#1}%
    \fi
  }%
  \macc@depth\@ne
  \let\math@bgroup\@empty \let\math@egroup\macc@set@skewchar
  \mathsurround\z@ \frozen@everymath{\mathgroup\macc@group\relax}%
  \macc@set@skewchar\relax
  \let\mathaccentV\macc@nested@a
%The following initialises \macc@kerna and calls \mathaccent:
  \if#31
    \macc@nested@a\relax111{#1}%
  \else
%If the argument consists of more than one symbol, and if the first token is
%a letter, use that letter for the computations:
    \def\gobble@till@marker##1\endmarker{}%
    \futurelet\first@char\gobble@till@marker#1\endmarker
    \ifcat\noexpand\first@char A\else
      \def\first@char{}%
    \fi
    \macc@nested@a\relax111{\first@char}%
  \fi
  \endgroup
}
\makeatother
